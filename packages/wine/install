#!/bin/bash

set -eu

sudo add-apt-repository -y ppa:cdemu/ppa

wget -O- https://dl.winehq.org/wine-builds/winehq.key | gpg --dearmor -o - - | sudo tee /etc/apt/keyrings/winehq-archive.key >/dev/null
sudo dpkg --add-architecture i386
sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/noble/winehq-noble.sources

sudo apt-get update
sudo apt-get install --install-recommends cdemu-client gcdemu winehq-stable winetricks

# Stop gcdemu from autostarting
cp /etc/xdg/autostart/gcdemu.desktop "${HOME}/.config/autostart/gcdemu.desktop"
echo 'Hidden=true' >>"${HOME}/.config/autostart/gcdemu.desktop"

winetricks dxvk gdiplus msftedit msls31
